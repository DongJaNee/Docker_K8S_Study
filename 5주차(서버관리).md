## 가상머신 리눅스 이미지 관리 (VM)
- 독립된 리눅스 환경
- 멀티 클라우드 한계
- 무겁고 느리고 커넽이너에 비해 효율적

## 도커/컨테이너를 통한 서버 관리
- 독립된 리눅스 환경
- 멀티 클라우드 문제 X
- 컨테이너 이미지를 통해 배포/롤백 용이
- 개발환경 == 배포환경
- VM과 다르게 빠르고 효율적

## 컨테이너 오케스트레이션 
**Cluster**
- 멀티서버(노드) 관리
- 멀티 컨테이너 관리

**STATE**
- 컨테이너 부하 관리
- 컨테이너 Replica 관리
- 컨테이너 상태유지

**SCHEDULING**
- 어느서버(노드)에 컨테이너를 적절하게 배포, 추가노드

**ROLLOUT, ROLLBACK**
- 버전 v1 -> v2    v2 -> v1

**SERVIVCE DISCOVERY**
- 서비스 추가시 watch / 모니터링 proxy 서버설정 자동 업데이트, 프로세스 재시작

**VOLUME**
- 노드마다 필요한 스토리지 연결 자동으로 관리 

---
## Virtual Box 에서 네트워크 설정 
### Master Node와 WorkNode 네트워크 설정 
- 어댑터에 브리지 사용
- MAC Address 겹치지 않게 설정


<img width="988" height="580" alt="image" src="https://github.com/user-attachments/assets/a4b34943-ea88-4353-a107-78c5d4189ce1" />

### dhcp로 받은 ip 주소로 로그인 하기 
ex) masternode의 IP 주소 : 192.168.50.43 이라면 
hostname : masternode@192.168.50.43   Port : 22

<img width="593" height="531" alt="image" src="https://github.com/user-attachments/assets/b145bafa-2076-4803-8be8-eba9591dde73" />


### masternode에도 docker 설치 
```
sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# Add the repository to Apt sources:
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update

 sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```


---
## 추가적으로 Netplan을 사용하고 싶으면
```
1) Ubuntu 18.04+ (Netplan 사용)

현재 사용 중인 넷플랜 파일 확인:

ls /etc/netplan/


YAML 열기(파일 이름은 다를 수 있음):

sudo nano /etc/netplan/01-netcfg.yaml


예시(게이트웨이와 DNS는 환경에 맞게 수정; 게이트웨이를 192.168.50.1로 가정):

network:
  version: 2
  ethernets:
    enp0s3:
      dhcp4: false
      addresses:
        - 192.168.50.43/24
      routes:
        - to: default
          via: 192.168.50.1
      nameservers:
        addresses: [1.1.1.1, 8.8.8.8]


적용:

sudo netplan apply


확인:

ip a show enp0s3
ip route
```
